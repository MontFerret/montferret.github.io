<!DOCTYPE html>
<html lang="en-us"><head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Ferret</title>

    <meta name="generator" content="Hugo 0.88.1" />

    <link
        href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700"
        rel="stylesheet"
    />

    
    <link rel="stylesheet" href="https://www.montferret.dev/sass/main.min.868c6b9520de92915da09f910b4c0c2ec4196c39e0bb489259db3724a0e14795.css" />
    <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png" />
    <link
        rel="apple-touch-icon"
        sizes="114x114"
        href="/favicon/apple-icon-114x114.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="120x120"
        href="/favicon/apple-icon-120x120.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="144x144"
        href="/favicon/apple-icon-144x144.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="152x152"
        href="/favicon/apple-icon-152x152.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="180x180"
        href="/favicon/apple-icon-180x180.png"
    />
    <link
        rel="icon"
        type="image/png"
        sizes="192x192"
        href="/favicon/android-icon-192x192.png"
    />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png" />
    <link rel="manifest" href="/favicon/manifest.json" />
    
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135792752-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-135792752-1');
    </script>
</head>
<body><nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item" href="/">
                <img src="/img/logo.png" width="30" height="30" /> <small class="logo">ferret</small>
            </a>

            <a
                id="navbar-burger"
                role="button"
                class="navbar-burger burger"
                aria-label="menu"
                aria-expanded="false"
                data-target="primary-nav"
            >
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        
        <div id="primary-nav" class="navbar-menu">
            <div class="navbar-start">
                
                
                
                        
                        <a href="/try/" class="navbar-item "
                        title=Try&#32;it id=repl>
                            Try it
                        </a>
                
                        
                        <a href="/docs/introduction" class="navbar-item "
                        title=Project&#32;documentation id=docs>
                            Docs
                        </a>
                
                        
                        <a href="/blog/" class="navbar-item  active"
                        title=Blog id=blog>
                            Blog
                        </a>
                
                        
                        <a href="/cookbook/google-search" class="navbar-item "
                        title=Cookbook id=cookbook>
                            Cookbook
                        </a>
                
            </div>

            <div class="navbar-end">
                
                
                        <a href="https://opencollective.com/ferret" class="navbar-item "
                        title=Open&#32;collective id=donate>
                            Donate
                        </a>
                
                        <a href="https://github.com/MontFerret/ferret" class="navbar-item "
                        title=GitHub&#32;repository id=github>
                            GitHub
                        </a>
                
            </div>
        </div>
    </div>
</nav>

<script>
    
    
    (function(){
        let navburger = document.getElementById("navbar-burger");
        navburger.addEventListener("click", function() {
            let target = this.getAttribute("data-target");
            let el = document.getElementById(target);

            el.classList.toggle("is-active");
        })
    })();
</script><div id="content">
    <div class="content section blog blog-post">
        <div class="columns is-centered blog-post-header has-text-centered">
            <div class="column is-10">
                <p class="title is-2">
                    Ferret v0.16.0
                </p>
                <p class="subtitle is-4">
                        Big changes
                    </p>
                <p class="subtitle is-6 has-text-grey">
                    <span>November 22, 2021</span> by <a href="https://github.com/ziflex">Tim Voronov</a>
                </p>
                <hr class="is-block-centered" />
            </div>
        </div>
        <div class="columns is-centered blog-post-content has-text-justified">
            <div class="column is-8">
                <p>Hello friends,</p>
<p>We hope everyone is healthy, happy, and ready for winter :)</p>
<p>Our team is back from the break and excited to announce a new Ferret release!</p>
<p>Ferret v0.16.0 is here and now it&rsquo;s more stable, flexible, and faster!</p>
<p>As always, CLI can be found <a href="https://github.com/MontFerret/cli/releases/tag/v1.2.0">here</a> and the runtime itself <a href="https://github.com/MontFerret/ferret/releases/tag/v0.16.0">here</a>.</p>
<p>Let&rsquo;s dive in and see what we&rsquo;ve got!</p>
<h1 id="whats-new">What&rsquo;s new</h1>
<p>In this release, besides internal optimizations, we&rsquo;ve focused on new language syntax and order to</p>
<h2 id="waitfor">WAITFOR</h2>
<p>This is the beginning of our <a href="https://github.com/MontFerret/ferret/issues/263">initiative</a> to replace <code>WAIT_</code> functions by providing a universal interface in the runtime type system. We&rsquo;ve started with <code>WAITFOR EVENT</code> statement.</p>
<p>The statement allows developers to declare a pause of the execution until a certain event occurs in a given source or a time is out (by default: 5000 ms).</p>
<p>The syntax is following:</p>
<pre tabindex="0"><code class="language-fql" data-lang="fql">WAITFOR EVENT event_name IN source [OPTIONS options] [FILTER expression] [TIMEOUT timeout]
</code></pre><p>It also can be used as an expression and assign returned event value to a variable:</p>
<pre tabindex="0"><code class="language-fql" data-lang="fql">LET evt = (WAITFOR EVENT event_name IN source [OPTIONS options] [FILTER expression] [TIMEOUT timeout])
</code></pre><p>At this moment, 3 events are supported by the <code>cdp</code> driver:</p>
<ul>
<li>navigation</li>
<li>request</li>
<li>response</li>
</ul>
<h3 id="navigation">Navigation</h3>
<p><code>navigation</code> event is intended to replace <code>WAIT_NAVIGATION</code> function which will be deprecated in the next release and focused to be more flexible.</p>
<pre tabindex="0"><code class="language-fql" data-lang="fql">WAITFOR EVENT &quot;navigation&quot; IN page
</code></pre><p>While the simple version of the statement provides extra readability, it also provides extra control over navigation using <code>FILTER</code> statement</p>
<pre tabindex="0"><code class="language-fql" data-lang="fql">WAITFOR EVENT &quot;navigation&quot; IN page FILTER CURREN.url LIKE &quot;MY_DESIRABLE_URL&quot;
</code></pre><p>You may have noticed <code>CURRENT</code> keyword inside the filter statement.
This is a pseudo-variable that provides access to the current event object. The event object will depend on the type of an event, in the case of navigation, the object has the following fields:</p>
<pre tabindex="0"><code class="language-fql" data-lang="fql">{
 url
 frame
 mimeType
}
</code></pre><p><code>frame</code> property allows to wait for a navigation event in one of nested frames:</p>
<pre tabindex="0"><code class="language-fql" data-lang="fql">WAITFOR EVENT &quot;navigation&quot; IN page FILTER CURREN.frame == nested_doc
</code></pre><h3 id="ajax">AJAX</h3>
<p><code>request</code> and <code>response</code> are the events you can use to subscribe to AJAX request/response operations:</p>








<div class="code-editor">

    

    <button id="code-editor-560-run-button" class="run button is-pulled-right is-outlined is-light is-radiusless code-editor-button">Run</button>

    <div class="columns">
        <div class="column is-6">
            <div id="code-editor-560-text" class="code-editor-text" style="height: 300px;">
                
LET doc = DOCUMENT('https://soundcloud.com/charts/top', { driver: "cdp" })

WAIT_ELEMENT(doc, '.chartTrack__details', 5000)
SCROLL_BOTTOM(doc)

LET evt = (WAITFOR EVENT "request" IN doc FILTER CURRENT.url LIKE "https://api-v2.soundcloud.com/charts?genre=soundcloud*")

RETURN evt.headers

            </div>
        </div>
        <div class="column is-6">
            <div id="code-editor-560-result" class="code-editor-result" style="height: 300px;"></div>
        </div>
    </div>
    

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function createEditor(id, mode) {
                const editor = ace.edit(id);
                editor.setTheme("ace\/theme\/tomorrow_night");
                editor.session.setMode("ace/mode/" + mode);
                editor.setOptions({
                    displayIndentGuides: false,
                    printMargin: false
                });

                return editor;
            }

            const btn = document.querySelector('#code-editor-560-run-button');
            const textEditor = createEditor('code-editor-560-text', 'aql');
            const resultEditor = createEditor('code-editor-560-result', 'json');
            resultEditor.setReadOnly(true);
                textEditor.setReadOnly(true);

            function setContent(editor, content) {
                editor.setValue(content, -1);
            }

            let isRunning = false;

            function onStart() {
                isRunning = true;
                textEditor.setReadOnly(true);
                btn.classList.add('is-loading');
            }

            function onEnd(result) {
                isRunning = false;
                textEditor.setReadOnly(false);
                btn.classList.remove('is-loading');

                setContent(resultEditor, result);
            }

            btn.addEventListener('click', () => {
                if (isRunning) {
                    return;
                }

                const body = {
                        text: textEditor.getValue(),
                        params: JSON.parse("{}")
                };

                onStart();
                fetch("https:\/\/ferret-worker-pucbyp2omq-ue.a.run.app", {
                    method: 'post',
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'application/json,encoding=utf-8'
                    },
                    body: JSON.stringify(body)
                })
                    .then(r => r.json())
                    .then((data) => {
                        onEnd(JSON.stringify(data, null, 4));
                    })
                    .catch((err) => {
                        onEnd(err.toString());
                    });
            });
        }, false);
    </script>
</div>
<p>Request object:</p>
<pre tabindex="0"><code class="language-fql" data-lang="fql">{
 url
 method
 headers
 body
}
</code></pre>







<div class="code-editor">

    

    <button id="code-editor-191-run-button" class="run button is-pulled-right is-outlined is-light is-radiusless code-editor-button">Run</button>

    <div class="columns">
        <div class="column is-6">
            <div id="code-editor-191-text" class="code-editor-text" style="height: 250px;">
                
LET doc = DOCUMENT('https://soundcloud.com/charts/top', { driver: "cdp" })

WAIT_ELEMENT(doc, '.chartTrack__details', 5000)
SCROLL_BOTTOM(doc)

LET evt = (WAITFOR EVENT "response" IN doc FILTER CURRENT.url LIKE "https://api-v2.soundcloud.com/charts?genre=soundcloud*")

RETURN JSON_PARSE(evt.body)

            </div>
        </div>
        <div class="column is-6">
            <div id="code-editor-191-result" class="code-editor-result" style="height: 250px;"></div>
        </div>
    </div>
    

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function createEditor(id, mode) {
                const editor = ace.edit(id);
                editor.setTheme("ace\/theme\/tomorrow_night");
                editor.session.setMode("ace/mode/" + mode);
                editor.setOptions({
                    displayIndentGuides: false,
                    printMargin: false
                });

                return editor;
            }

            const btn = document.querySelector('#code-editor-191-run-button');
            const textEditor = createEditor('code-editor-191-text', 'aql');
            const resultEditor = createEditor('code-editor-191-result', 'json');
            resultEditor.setReadOnly(true);
                textEditor.setReadOnly(true);

            function setContent(editor, content) {
                editor.setValue(content, -1);
            }

            let isRunning = false;

            function onStart() {
                isRunning = true;
                textEditor.setReadOnly(true);
                btn.classList.add('is-loading');
            }

            function onEnd(result) {
                isRunning = false;
                textEditor.setReadOnly(false);
                btn.classList.remove('is-loading');

                setContent(resultEditor, result);
            }

            btn.addEventListener('click', () => {
                if (isRunning) {
                    return;
                }

                const body = {
                        text: textEditor.getValue(),
                        params: JSON.parse("{}")
                };

                onStart();
                fetch("https:\/\/ferret-worker-pucbyp2omq-ue.a.run.app", {
                    method: 'post',
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'application/json,encoding=utf-8'
                    },
                    body: JSON.stringify(body)
                })
                    .then(r => r.json())
                    .then((data) => {
                        onEnd(JSON.stringify(data, null, 4));
                    })
                    .catch((err) => {
                        onEnd(err.toString());
                    });
            });
        }, false);
    </script>
</div>
<p>Response object:</p>
<pre tabindex="0"><code class="language-fql" data-lang="fql">{
 url 
 statusCode
 status 
 headers 
 body 
 responseTime
}
</code></pre><p>They can be useful for intercepting data between a client and a server.</p>
<h2 id="optional-chaining">Optional chaining</h2>
<p>From the early days of Ferret, the runtime has been pretty strict on accessing properties of values that either are null or do not provide any properties by terminating an execution with a type error. But sometimes, the result of the accessing property might not be that important which makes us write long ternary operators that do some checks.</p>
<p>Well, now you do not have to do it anymore! This release is bringing the optional chaining aka Elvis operator to FQL language:</p>
<div class="notification is-info">
    The optional chaining operator (?.) enables you to read the value of a property located deep within a chain of connected objects without having to check that each reference in the chain is valid.
</div>








<div class="code-editor">

    

    <button id="code-editor-244-run-button" class="run button is-pulled-right is-outlined is-light is-radiusless code-editor-button">Run</button>

    <div class="columns">
        <div class="column is-6">
            <div id="code-editor-244-text" class="code-editor-text" style="height: 100px;">
                
LET foo = { bar: NONE }
RETURN foo?.bar?.baz

            </div>
        </div>
        <div class="column is-6">
            <div id="code-editor-244-result" class="code-editor-result" style="height: 100px;"></div>
        </div>
    </div>
    

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function createEditor(id, mode) {
                const editor = ace.edit(id);
                editor.setTheme("ace\/theme\/tomorrow_night");
                editor.session.setMode("ace/mode/" + mode);
                editor.setOptions({
                    displayIndentGuides: false,
                    printMargin: false
                });

                return editor;
            }

            const btn = document.querySelector('#code-editor-244-run-button');
            const textEditor = createEditor('code-editor-244-text', 'aql');
            const resultEditor = createEditor('code-editor-244-result', 'json');
            resultEditor.setReadOnly(true);
                textEditor.setReadOnly(true);

            function setContent(editor, content) {
                editor.setValue(content, -1);
            }

            let isRunning = false;

            function onStart() {
                isRunning = true;
                textEditor.setReadOnly(true);
                btn.classList.add('is-loading');
            }

            function onEnd(result) {
                isRunning = false;
                textEditor.setReadOnly(false);
                btn.classList.remove('is-loading');

                setContent(resultEditor, result);
            }

            btn.addEventListener('click', () => {
                if (isRunning) {
                    return;
                }

                const body = {
                        text: textEditor.getValue(),
                        params: JSON.parse("{}")
                };

                onStart();
                fetch("https:\/\/ferret-worker-pucbyp2omq-ue.a.run.app", {
                    method: 'post',
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'application/json,encoding=utf-8'
                    },
                    body: JSON.stringify(body)
                })
                    .then(r => r.json())
                    .then((data) => {
                        onEnd(JSON.stringify(data, null, 4));
                    })
                    .catch((err) => {
                        onEnd(err.toString());
                    });
            });
        }, false);
    </script>
</div>
<p>The <code>?.</code> operator is like the <code>.</code> chaining operator, except that instead of returning an error if a reference is null, the expression short-circuits with a return value of <code>NONE</code>.</p>
<h2 id="errors-suppression">Errors suppression</h2>
<p>Errors suppression feature is somewhat similar to the optional chaining in allowing to tolerate insignificant errors during query execution and return <code>NONE</code> in case of occurred error:</p>








<div class="code-editor">

    

    <button id="code-editor-593-run-button" class="run button is-pulled-right is-outlined is-light is-radiusless code-editor-button">Run</button>

    <div class="columns">
        <div class="column is-6">
            <div id="code-editor-593-text" class="code-editor-text" style="height: 100px;">
                
LET el = ELEMENT(NONE, "#el")?

RETURN el == NONE

            </div>
        </div>
        <div class="column is-6">
            <div id="code-editor-593-result" class="code-editor-result" style="height: 100px;"></div>
        </div>
    </div>
    

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function createEditor(id, mode) {
                const editor = ace.edit(id);
                editor.setTheme("ace\/theme\/tomorrow_night");
                editor.session.setMode("ace/mode/" + mode);
                editor.setOptions({
                    displayIndentGuides: false,
                    printMargin: false
                });

                return editor;
            }

            const btn = document.querySelector('#code-editor-593-run-button');
            const textEditor = createEditor('code-editor-593-text', 'aql');
            const resultEditor = createEditor('code-editor-593-result', 'json');
            resultEditor.setReadOnly(true);
                textEditor.setReadOnly(true);

            function setContent(editor, content) {
                editor.setValue(content, -1);
            }

            let isRunning = false;

            function onStart() {
                isRunning = true;
                textEditor.setReadOnly(true);
                btn.classList.add('is-loading');
            }

            function onEnd(result) {
                isRunning = false;
                textEditor.setReadOnly(false);
                btn.classList.remove('is-loading');

                setContent(resultEditor, result);
            }

            btn.addEventListener('click', () => {
                if (isRunning) {
                    return;
                }

                const body = {
                        text: textEditor.getValue(),
                        params: JSON.parse("{}")
                };

                onStart();
                fetch("https:\/\/ferret-worker-pucbyp2omq-ue.a.run.app", {
                    method: 'post',
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'application/json,encoding=utf-8'
                    },
                    body: JSON.stringify(body)
                })
                    .then(r => r.json())
                    .then((data) => {
                        onEnd(JSON.stringify(data, null, 4));
                    })
                    .catch((err) => {
                        onEnd(err.toString());
                    });
            });
        }, false);
    </script>
</div>
<p>If you try to execute the same query, but without <code>?</code> operator, it will fail:</p>








<div class="code-editor">

    

    <button id="code-editor-513-run-button" class="run button is-pulled-right is-outlined is-light is-radiusless code-editor-button">Run</button>

    <div class="columns">
        <div class="column is-6">
            <div id="code-editor-513-text" class="code-editor-text" style="height: 100px;">
                
LET el = ELEMENT(NONE, "#el")

RETURN el == NONE

            </div>
        </div>
        <div class="column is-6">
            <div id="code-editor-513-result" class="code-editor-result" style="height: 100px;"></div>
        </div>
    </div>
    

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function createEditor(id, mode) {
                const editor = ace.edit(id);
                editor.setTheme("ace\/theme\/tomorrow_night");
                editor.session.setMode("ace/mode/" + mode);
                editor.setOptions({
                    displayIndentGuides: false,
                    printMargin: false
                });

                return editor;
            }

            const btn = document.querySelector('#code-editor-513-run-button');
            const textEditor = createEditor('code-editor-513-text', 'aql');
            const resultEditor = createEditor('code-editor-513-result', 'json');
            resultEditor.setReadOnly(true);
                textEditor.setReadOnly(true);

            function setContent(editor, content) {
                editor.setValue(content, -1);
            }

            let isRunning = false;

            function onStart() {
                isRunning = true;
                textEditor.setReadOnly(true);
                btn.classList.add('is-loading');
            }

            function onEnd(result) {
                isRunning = false;
                textEditor.setReadOnly(false);
                btn.classList.remove('is-loading');

                setContent(resultEditor, result);
            }

            btn.addEventListener('click', () => {
                if (isRunning) {
                    return;
                }

                const body = {
                        text: textEditor.getValue(),
                        params: JSON.parse("{}")
                };

                onStart();
                fetch("https:\/\/ferret-worker-pucbyp2omq-ue.a.run.app", {
                    method: 'post',
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'application/json,encoding=utf-8'
                    },
                    body: JSON.stringify(body)
                })
                    .then(r => r.json())
                    .then((data) => {
                        onEnd(JSON.stringify(data, null, 4));
                    })
                    .catch((err) => {
                        onEnd(err.toString());
                    });
            });
        }, false);
    </script>
</div>
<p>The <code>?</code> operator is like the <code>?.</code> optional chaining operator, but for function calls and inline statements:</p>








<div class="code-editor">

    

    <button id="code-editor-974-run-button" class="run button is-pulled-right is-outlined is-light is-radiusless code-editor-button">Run</button>

    <div class="columns">
        <div class="column is-6">
            <div id="code-editor-974-text" class="code-editor-text" style="height: 150px;">
                
LET page = DOCUMENT('https://soundcloud.com/charts/top', { driver: "cdp" })
LET evt = (WAITFOR EVENT "navigation" IN page)?

RETURN evt == NONE ? "not navigated" : "navigated"

            </div>
        </div>
        <div class="column is-6">
            <div id="code-editor-974-result" class="code-editor-result" style="height: 150px;"></div>
        </div>
    </div>
    

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function createEditor(id, mode) {
                const editor = ace.edit(id);
                editor.setTheme("ace\/theme\/tomorrow_night");
                editor.session.setMode("ace/mode/" + mode);
                editor.setOptions({
                    displayIndentGuides: false,
                    printMargin: false
                });

                return editor;
            }

            const btn = document.querySelector('#code-editor-974-run-button');
            const textEditor = createEditor('code-editor-974-text', 'aql');
            const resultEditor = createEditor('code-editor-974-result', 'json');
            resultEditor.setReadOnly(true);
                textEditor.setReadOnly(true);

            function setContent(editor, content) {
                editor.setValue(content, -1);
            }

            let isRunning = false;

            function onStart() {
                isRunning = true;
                textEditor.setReadOnly(true);
                btn.classList.add('is-loading');
            }

            function onEnd(result) {
                isRunning = false;
                textEditor.setReadOnly(false);
                btn.classList.remove('is-loading');

                setContent(resultEditor, result);
            }

            btn.addEventListener('click', () => {
                if (isRunning) {
                    return;
                }

                const body = {
                        text: textEditor.getValue(),
                        params: JSON.parse("{}")
                };

                onStart();
                fetch("https:\/\/ferret-worker-pucbyp2omq-ue.a.run.app", {
                    method: 'post',
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'application/json,encoding=utf-8'
                    },
                    body: JSON.stringify(body)
                })
                    .then(r => r.json())
                    .then((data) => {
                        onEnd(JSON.stringify(data, null, 4));
                    })
                    .catch((err) => {
                        onEnd(err.toString());
                    });
            });
        }, false);
    </script>
</div>
<h2 id="xpath-selectors">XPath selectors</h2>
<p>This is one of the long waiting features - universal use of XPath selectors.
With updated interface of HTML driver componenets, it is possible to pass XPath selectors to HTML API functions by using new <code>X</code> function:</p>








<div class="code-editor">

    

    <button id="code-editor-305-run-button" class="run button is-pulled-right is-outlined is-light is-radiusless code-editor-button">Run</button>

    <div class="columns">
        <div class="column is-6">
            <div id="code-editor-305-text" class="code-editor-text" style="height: 250px;">
                
LET page = DOCUMENT('https://soundcloud.com/charts/top', { driver: "cdp" })
WAIT_ELEMENT(page, X("//div[contains(@class, 'chartTrack__details')]"), 5000)

FOR el IN ELEMENTS(page, X("//div[contains(@class, 'chartTracks')]/ul/li"))
    LET details = ELEMENT(el, X('./div/div[3]'))
    RETURN {
        artist: INNER_TEXT(details, X('./div[1]')),
        title:  INNER_TEXT(details, X('./div[2]')),
    }

            </div>
        </div>
        <div class="column is-6">
            <div id="code-editor-305-result" class="code-editor-result" style="height: 250px;"></div>
        </div>
    </div>
    

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function createEditor(id, mode) {
                const editor = ace.edit(id);
                editor.setTheme("ace\/theme\/tomorrow_night");
                editor.session.setMode("ace/mode/" + mode);
                editor.setOptions({
                    displayIndentGuides: false,
                    printMargin: false
                });

                return editor;
            }

            const btn = document.querySelector('#code-editor-305-run-button');
            const textEditor = createEditor('code-editor-305-text', 'aql');
            const resultEditor = createEditor('code-editor-305-result', 'json');
            resultEditor.setReadOnly(true);
                textEditor.setReadOnly(true);

            function setContent(editor, content) {
                editor.setValue(content, -1);
            }

            let isRunning = false;

            function onStart() {
                isRunning = true;
                textEditor.setReadOnly(true);
                btn.classList.add('is-loading');
            }

            function onEnd(result) {
                isRunning = false;
                textEditor.setReadOnly(false);
                btn.classList.remove('is-loading');

                setContent(resultEditor, result);
            }

            btn.addEventListener('click', () => {
                if (isRunning) {
                    return;
                }

                const body = {
                        text: textEditor.getValue(),
                        params: JSON.parse("{}")
                };

                onStart();
                fetch("https:\/\/ferret-worker-pucbyp2omq-ue.a.run.app", {
                    method: 'post',
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'application/json,encoding=utf-8'
                    },
                    body: JSON.stringify(body)
                })
                    .then(r => r.json())
                    .then((data) => {
                        onEnd(JSON.stringify(data, null, 4));
                    })
                    .catch((err) => {
                        onEnd(err.toString());
                    });
            });
        }, false);
    </script>
</div>
<p><code>X</code> function creates an XPath type of query selector which is supported by all HTML API functions now. The function automatically resolves returned value based on its type.</p>
<h2 id="discard-results">Discard results</h2>
<p>Sometimes we need to do some prep work in a <code>FOR</code> loop but are not interested in the returned result. With this release we can use Go-like <code>_</code> variable name to discard results.</p>
<p>Like in Go, you cannot access this variable later:</p>








<div class="code-editor">

    

    <button id="code-editor-716-run-button" class="run button is-pulled-right is-outlined is-light is-radiusless code-editor-button">Run</button>

    <div class="columns">
        <div class="column is-6">
            <div id="code-editor-716-text" class="code-editor-text" style="height: 250px;">
                
LET _ = (
    FOR num IN 1..10
        PRINT(num)
        RETURN NONE
)

RETURN _

            </div>
        </div>
        <div class="column is-6">
            <div id="code-editor-716-result" class="code-editor-result" style="height: 250px;"></div>
        </div>
    </div>
    

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            function createEditor(id, mode) {
                const editor = ace.edit(id);
                editor.setTheme("ace\/theme\/tomorrow_night");
                editor.session.setMode("ace/mode/" + mode);
                editor.setOptions({
                    displayIndentGuides: false,
                    printMargin: false
                });

                return editor;
            }

            const btn = document.querySelector('#code-editor-716-run-button');
            const textEditor = createEditor('code-editor-716-text', 'aql');
            const resultEditor = createEditor('code-editor-716-result', 'json');
            resultEditor.setReadOnly(true);
                textEditor.setReadOnly(true);

            function setContent(editor, content) {
                editor.setValue(content, -1);
            }

            let isRunning = false;

            function onStart() {
                isRunning = true;
                textEditor.setReadOnly(true);
                btn.classList.add('is-loading');
            }

            function onEnd(result) {
                isRunning = false;
                textEditor.setReadOnly(false);
                btn.classList.remove('is-loading');

                setContent(resultEditor, result);
            }

            btn.addEventListener('click', () => {
                if (isRunning) {
                    return;
                }

                const body = {
                        text: textEditor.getValue(),
                        params: JSON.parse("{}")
                };

                onStart();
                fetch("https:\/\/ferret-worker-pucbyp2omq-ue.a.run.app", {
                    method: 'post',
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'application/json,encoding=utf-8'
                    },
                    body: JSON.stringify(body)
                })
                    .then(r => r.json())
                    .then((data) => {
                        onEnd(JSON.stringify(data, null, 4));
                    })
                    .catch((err) => {
                        onEnd(err.toString());
                    });
            });
        }, false);
    </script>
</div>
<h1 id="whats-fixed">What&rsquo;s fixed</h1>
<p>Here is a list of important bug fixes:</p>
<ul>
<li><code>values.Parse</code> does not parse int64</li>
<li>CPU leakage</li>
<li>nil pointer exception</li>
<li>HTTP driver makes multiple requests #642</li>
</ul>
<h1 id="summary">Summary</h1>
<p>That&rsquo;s it, folks! Full list of changes you you can find <a href="https://github.com/MontFerret/ferret/blob/master/CHANGELOG.md#0160">here</a>.
Thanks everyone who contributed to the project!</p>

            </div>
        </div>
    </div>

        </div><footer class="footer">
    <div class="columns">
        <div class="column is-4 is-hidden-mobile">
            <p>
                <a href="https://github.com/MontFerret">
                    © 2018-2021 MontFerret Team
                </a>
            </p>
            <p>
                <a href="https://www.montferret.dev/blog/index.xml">RSS</a>
            </p>
        </div>
        <div class="column is-4 has-text-centered">
            <img src="/img/logo.png" width="30" height="30" />
        </div>
        <div class="column is-4 has-text-right is-hidden-mobile">
            <a href="#">BACK TO TOP Δ</a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ace.min.js"
        integrity="sha256-qCCcAHv/Z0u7K344shsZKUF2NR+59ooA3XWRj0LPGIQ=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/mode-aql.min.js"
        integrity="sha256-X0EL61aEe9ZmA9OkWgfPw7QMJc2DPs3/RcarIt15j8Y=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/mode-json.min.js"
        integrity="sha256-oMH6MIx8AGl0OseaL8vGcdSb9ons1Jprkf4xXAyzvNc=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/mode-golang.min.js"
        integrity="sha256-0SvSdpO3x7J6KQZ5Y9ghI0wph0l0DDMUaOQu+Swjup0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/theme-tomorrow_night.min.js"
        integrity="sha256-NbswWaBBhaLvBJ18ocfQ7sC/Iy/+7KvGq0YRjvLRpk4=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/mode-sh.min.js"
        integrity="sha256-uzCsgXA65+SIa2CRZSX6+Ls6DKZkddI5rtRXr1uOE2Y=" crossorigin="anonymous"></script>
</footer></body>
</html>
