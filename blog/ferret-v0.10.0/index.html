<!DOCTYPE html>
<html lang="en-us"><head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Ferret</title>

    <meta name="generator" content="Hugo 0.75.0" />

    <link
        href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700"
        rel="stylesheet"
    />

    
    <link rel="stylesheet" href="https://www.montferret.dev/sass/main.min.64f1f7a6c5e475867d245403cd132b96cb35a0f513fdae841e901a1feac0734c.css" />
    <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png" />
    <link
        rel="apple-touch-icon"
        sizes="114x114"
        href="/favicon/apple-icon-114x114.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="120x120"
        href="/favicon/apple-icon-120x120.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="144x144"
        href="/favicon/apple-icon-144x144.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="152x152"
        href="/favicon/apple-icon-152x152.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="180x180"
        href="/favicon/apple-icon-180x180.png"
    />
    <link
        rel="icon"
        type="image/png"
        sizes="192x192"
        href="/favicon/android-icon-192x192.png"
    />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png" />
    <link rel="manifest" href="/favicon/manifest.json" />
    
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135792752-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-135792752-1');
    </script>
</head>
<body><nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item" href="/">
                <img src="/img/logo.png" width="30" height="30" /> <small class="logo">ferret</small>
            </a>

            <a
                id="navbar-burger"
                role="button"
                class="navbar-burger burger"
                aria-label="menu"
                aria-expanded="false"
                data-target="primary-nav"
            >
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        
        <div id="primary-nav" class="navbar-menu">
            <div class="navbar-start">
                
                
                
                        
                        <a href="/try/" class="navbar-item "
                        title=Try&#32;it id=repl>
                            Try it
                        </a>
                
                        
                        <a href="/docs/introduction" class="navbar-item "
                        title=Project&#32;documentation id=docs>
                            Docs
                        </a>
                
                        
                        <a href="/blog/" class="navbar-item  active"
                        title=Blog id=blog>
                            Blog
                        </a>
                
                        
                        <a href="/cookbook/google-search" class="navbar-item "
                        title=Cookbook id=cookbook>
                            Cookbook
                        </a>
                
            </div>

            <div class="navbar-end">
                
                
                        <a href="https://opencollective.com/ferret" class="navbar-item "
                        title=Open&#32;collective id=donate>
                            Donate
                        </a>
                
                        <a href="https://github.com/MontFerret/ferret" class="navbar-item "
                        title=GitHub&#32;repository id=github>
                            GitHub
                        </a>
                
            </div>
        </div>
    </div>
</nav>

<script>
    
    
    (function(){
        let navburger = document.getElementById("navbar-burger");
        navburger.addEventListener("click", function() {
            let target = this.getAttribute("data-target");
            let el = document.getElementById(target);

            el.classList.toggle("is-active");
        })
    })();
</script><div id="content">
    <div class="content section blog blog-post">
        <div class="columns is-centered blog-post-header has-text-centered">
            <div class="column is-10">
                <p class="title is-2">
                    Ferret v0.10.0
                </p>
                <p class="subtitle is-4">
                        Comeback
                    </p>
                <p class="subtitle is-6 has-text-grey">
                    <span>February 21, 2020</span> by <a href="https://www.twitter.com/ziflex">Tim Voronov</a>
                </p>
                <hr class="is-block-centered" />
            </div>
        </div>
        <div class="columns is-centered blog-post-content has-text-justified">
            <div class="column is-8">
                <p>Hello fellow miners, <strong><a href="https://github.com/MontFerret/ferret/releases/tag/v0.10.0">Ferret v0.10.0</a></strong> has been <strong>finally</strong> released!</p>
<p>It&rsquo;s been long and busy 6 months since the last release and many of you might thought that the project got abandoned. <br>
We assure you it&rsquo;s not! But sometimes life happens and slows you down.</p>
<p>But we are back and ready to rock!</p>
<p>This release has many great features and improvements thank to all our contributors. <br>
Let&rsquo;s take a look at the most important ones. The full changelog you can find <a href="https://github.com/MontFerret/ferret/blob/master/CHANGELOG.md#0100">here</a>.</p>
<h1 id="whats-added">What&rsquo;s added</h1>
<h2 id="io-functions">I/O functions</h2>
<p>You asked - we added! Finally, I/O functions have arrived.
In the beginning of the project, we were concerned about security threats that access to filesystem poses, but seeing how demanded this functionality is we agreed to add it. <br>
Now, Ferret has new I/O namespaces, with the following functions:</p>
<ul>
<li><code>IO::FS::READ</code></li>
<li><code>IO::FS::WRITE</code></li>
<li><code>IO::NET::HTTP:GET</code></li>
<li><code>IO::NET::HTTP:POST</code></li>
<li><code>IO::NET::HTTP:PUT</code></li>
<li><code>IO::NET::HTTP:DELETE</code></li>
<li><code>IO::NET::HTTP:REQUEST</code></li>
</ul>
<p>Enjoy!</p>
<h2 id="loading-html-string-into-memory">Loading HTML string into memory</h2>
<p>Another popular feature request - possibility to load a prefetched HTML string into Ferret. <br>
With this release, you can finally do it with <code>HTML_PARSE</code> function.</p>




<div class="code-editor">
    <div class="columns">
        <div class="column is-full">
            <div id="code-671-text" class="code-editor-text" style="height: 180px;">
                
LET file = IO::FS::READ(@myfile)

LET doc = HTML_PARSE(TO_STRING(file), {
    driver: 'cdp' // or 'http'
})

RETURN INNER_TEXT(doc, 'title')

            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const editor = ace.edit('code-671-text');
            editor.setTheme("ace/theme/tomorrow_night");
            editor.session.setMode("ace/mode/" + 'aql');
            editor.setOptions({readOnly: true, highlightActiveLine: false, highlightGutterLine: false});
            editor.renderer.$cursorLayer.element.style.display = "none"
        }, false);
    </script>
</div>
<h2 id="parameter-value-availability-check">Parameter value availability check</h2>
<p>In this release, we do pre-runtime check whether all values are provided for parameters used by a script. <br>
It was very frustrating when your script was failing in the middle of its execution just because you forgot to provide a value for one of the paramaters.</p>
<h1 id="whats-changed">What&rsquo;s changed</h1>
<h2 id="case-insensitivity">Case insensitivity</h2>
<p>Finally, FQL keywords are case insensitive!</p>
<p>That&rsquo;s how Google Search query looks like in lower case now:</p>




<div class="code-editor">
    <div class="columns">
        <div class="column is-full">
            <div id="code-736-text" class="code-editor-text" style="height: 330px;">
                
let google = document("https://www.google.com/", {
    driver: "cdp",
})

input(google, 'input[name="q"]', "ferret")
click(google, 'input[name="btnK"]')

wait_navigation(google)

for result in elements(google, '.g')
    filter trim(result.attributes.class) == 'g'
    return {
        title: inner_text(result, 'h3'),
        description: inner_text(result, '.st'),
        url: inner_text(result, 'cite')
    }

            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const editor = ace.edit('code-736-text');
            editor.setTheme("ace/theme/tomorrow_night");
            editor.session.setMode("ace/mode/" + 'aql');
            editor.setOptions({readOnly: true, highlightActiveLine: false, highlightGutterLine: false});
            editor.renderer.$cursorLayer.element.style.display = "none"
        }, false);
    </script>
</div>
<h2 id="improved-cdp-driver-performance">Improved CDP driver performance</h2>
<p>CDP driver performance has been drastically improved that brings CPU usage down from 60% for 3 pages to &lt;1%.</p>
<h1 id="whats-fixed">What&rsquo;s fixed</h1>
<h2 id="redirects">Redirects</h2>
<p>It was a long lasting problem that Ferret could not correctly handle redirects that could occur during a page navigation that was leading to timeouts or corrupt page state.</p>
<p>Now it has finally been fixed!<br>
<code>WAIT_NAVIGATION</code> function has 2nd optional parameter that can be an object with the following fields:</p>




<div class="code-editor">
    <div class="columns">
        <div class="column is-full">
            <div id="code-71-text" class="code-editor-text" style="height: 135px;">
                
type Parameters struct {
    TargetURL string
    Timeout time.Duration
}

            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const editor = ace.edit('code-71-text');
            editor.setTheme("ace/theme/tomorrow_night");
            editor.session.setMode("ace/mode/" + 'golang');
            editor.setOptions({readOnly: true, highlightActiveLine: false, highlightGutterLine: false});
            editor.renderer.$cursorLayer.element.style.display = "none"
        }, false);
    </script>
</div>
<p><code>TargetURL</code> is a regexp string that can be used to give Ferret a hint what the destination url is:</p>




<div class="code-editor">
    <div class="columns">
        <div class="column is-full">
            <div id="code-672-text" class="code-editor-text" style="height: 220px;">
                
LET doc = DOCUMENT("http://waos.ovh/redirect.html", {
    driver: 'cdp'
})

CLICK(doc, '.click')

WAIT_NAVIGATION(doc, { targetURL: "redirect2\.html" })

RETURN ELEMENT(doc, '.title')

            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const editor = ace.edit('code-672-text');
            editor.setTheme("ace/theme/tomorrow_night");
            editor.session.setMode("ace/mode/" + 'aql');
            editor.setOptions({readOnly: true, highlightActiveLine: false, highlightGutterLine: false});
            editor.renderer.$cursorLayer.element.style.display = "none"
        }, false);
    </script>
</div>

            </div>
        </div>
    </div>

        </div><footer class="footer">
    <div class="columns">
        <div class="column is-4 is-hidden-mobile">
            <a href="https://github.com/MontFerret">
                © 2018-2020 MontFerret Team
            </a>
        </div>
        <div class="column is-4 has-text-centered">
            <img src="/img/logo.png" width="30" height="30" />
        </div>
        <div class="column is-4 has-text-right is-hidden-mobile">
            <a href="#">BACK TO TOP Δ</a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ace.min.js" integrity="sha256-qCCcAHv/Z0u7K344shsZKUF2NR+59ooA3XWRj0LPGIQ=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/mode-aql.min.js" integrity="sha256-X0EL61aEe9ZmA9OkWgfPw7QMJc2DPs3/RcarIt15j8Y=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/mode-json.min.js" integrity="sha256-oMH6MIx8AGl0OseaL8vGcdSb9ons1Jprkf4xXAyzvNc=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/mode-golang.min.js" integrity="sha256-0SvSdpO3x7J6KQZ5Y9ghI0wph0l0DDMUaOQu+Swjup0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/theme-tomorrow_night.min.js" integrity="sha256-NbswWaBBhaLvBJ18ocfQ7sC/Iy/+7KvGq0YRjvLRpk4=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/mode-sh.min.js" integrity="sha256-uzCsgXA65+SIa2CRZSX6+Ls6DKZkddI5rtRXr1uOE2Y=" crossorigin="anonymous"></script>
</footer>
</body>
</html>
