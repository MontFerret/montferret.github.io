<!DOCTYPE html>
<html lang="en-us"><head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Ferret</title>

    <meta name="generator" content="Hugo 0.69.2" />

    <link
        href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700"
        rel="stylesheet"
    />

    
    <link rel="stylesheet" href="https://www.montferret.dev/sass/main.min.e8072988abf11ab16f93c62483f40e68182f8378472a0d3ab2a6280c0f21451b.css" />
    <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png" />
    <link
        rel="apple-touch-icon"
        sizes="114x114"
        href="/favicon/apple-icon-114x114.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="120x120"
        href="/favicon/apple-icon-120x120.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="144x144"
        href="/favicon/apple-icon-144x144.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="152x152"
        href="/favicon/apple-icon-152x152.png"
    />
    <link
        rel="apple-touch-icon"
        sizes="180x180"
        href="/favicon/apple-icon-180x180.png"
    />
    <link
        rel="icon"
        type="image/png"
        sizes="192x192"
        href="/favicon/android-icon-192x192.png"
    />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png" />
    <link rel="manifest" href="/favicon/manifest.json" />
    
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135792752-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-135792752-1');
    </script>
</head>
<body><nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item" href="/">
                <img src="/img/logo.png" width="30" height="30" /> <small class="logo">ferret</small>
            </a>

            <a
                id="navbar-burger"
                role="button"
                class="navbar-burger burger"
                aria-label="menu"
                aria-expanded="false"
                data-target="primary-nav"
            >
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>
        
        <div id="primary-nav" class="navbar-menu">
            <div class="navbar-start">
                
                
                
                        
                        <a href="/docs/introduction" class="navbar-item "
                        title=Project&#32;documentation id=docs>
                            Docs
                        </a>
                
                        
                        <a href="/blog/" class="navbar-item "
                        title=Blog id=blog>
                            Blog
                        </a>
                
            </div>

            <div class="navbar-end">
                
                
                        <a href="https://opencollective.com/ferret" class="navbar-item "
                        title=Open&#32;collective id=donate>
                            Donate
                        </a>
                
                        <a href="https://github.com/MontFerret/ferret" class="navbar-item "
                        title=GitHub&#32;repository id=github>
                            GitHub
                        </a>
                
            </div>
        </div>
    </div>
</nav>

<script>
    
    
    (function(){
        let navburger = document.getElementById("navbar-burger");
        navburger.addEventListener("click", function() {
            let target = this.getAttribute("data-target");
            let el = document.getElementById(target);

            el.classList.toggle("is-active");
        })
    })();
</script><div id="content">
    <div class="content section docs">
    <div class="columns">
        <section class="column is-2">
            <aside class="menu">
    
    








<p class="menu-label">
    General
</p>
<ul class="menu-list">
    
        
        <li>
            <a href="https://www.montferret.dev/docs/introduction/" class="">
                Introduction
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/installation/" class="">
                Installation
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/getting-started/" class="">
                Getting started
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/fql/" class="">
                Query language
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/" class="">
                stdlib
            </a>
        </li>
    


</ul>



    
        

        
            








<p class="menu-label">
    Query language
</p>
<ul class="menu-list">
    
        
        <li>
            <a href="https://www.montferret.dev/docs/fql/introduction/" class="">
                Introduction
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/fql/syntax/" class="">
                Syntax
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/fql/operators/" class="">
                Operators
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/fql/data-types/" class="is-active">
                Data types
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/fql/bind-parameters/" class="">
                Bind parameters
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/fql/type-value-order/" class="">
                Type and value order
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/fql/query-results/" class="">
                Query results
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/fql/query-errors/" class="">
                Query errors
            </a>
        </li>
    






</ul>

        
    

    
        

        
            








<p class="menu-label">
    stdlib
</p>
<ul class="menu-list">
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/arrays/" class="">
                arrays
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/collections/" class="">
                collections
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/datetime/" class="">
                datetime
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/html/" class="">
                html
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/io-fs/" class="">
                io/fs
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/io-net-http/" class="">
                io/net/http
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/math/" class="">
                math
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/objects/" class="">
                objects
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/path/" class="">
                path
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/strings/" class="">
                strings
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/types/" class="">
                types
            </a>
        </li>
    
        
        <li>
            <a href="https://www.montferret.dev/docs/stdlib/utils/" class="">
                utils
            </a>
        </li>
    






</ul>

        
    



</aside>

        </section>
        <section id="main" class="column is-8">
            <article id="content" class="has-text-justified">
    <h1 id="data-types">Data types</h1>
<p>FQL supports both primitive data types consisting of exactly one value and compound data types comprised of multiple values. The following types are available:</p>
<!-- raw HTML omitted -->
<h2 id="primitive-types">Primitive types</h2>
<h3 id="none-value">None value</h3>
<p>A none value can be used to represent an empty or absent value. It is different from a numerical value of zero (null != 0) and other falsy values (false, zero-length string, empty array or object). It is also known as nil or null in other languages.</p>
<h3 id="boolean-data-type">Boolean data type</h3>
<p>The Boolean data type has two possible values, <code>true</code> and <code>false</code>. They represent the two truth values in logic and mathematics.</p>
<h3 id="numeric-literals">Numeric literals</h3>
<p>Numeric literals can be integers or floating-point numbers. They can optionally be signed with the + or - symbols. A decimal point . is used as separator for the optional fractional part.</p>
<pre class="hl">
    <code class="fql">
        
1
+1
42
-1
-42
0.5
1.23
-99.99

    </code>
</pre>
<h3 id="string-literals">String literals</h3>
<p>String literals must be enclosed in single or double quotes. If the used quote character is to be used itself within the string literal, it must be escaped using the backslash symbol. A literal backslash also needs to be escaped with a backslash.</p>
<pre class="hl">
    <code class="fql">
        
"yikes!"
"don't know"
"this is a \"quoted\" word"
"this is a longer string."
"the path separator on Windows is \\"

'yikes!'
'don\'t know'
'this is a "quoted" word'
'this is a longer string.'
'the path separator on Windows is \\'

    </code>
</pre>
<h2 id="compound-types">Compound types</h2>
<p>FQL supports two compound types:</p>
<ul>
<li>array: A composition of unnamed values, each accessible by their positions.</li>
<li>object: A composition of named values, each accessible by their names.</li>
<li>binary: An array of binary values.</li>
</ul>
<h3 id="arrays">Arrays</h3>
<p>The first supported compound type is the array type. Arrays are effectively sequences of (unnamed / anonymous) values. Individual array elements can be accessed by their positions. The order of elements in an array is important.</p>
<p>An array declaration starts with a left square bracket <code>[</code> and ends with a right square bracket <code>]</code>. The declaration contains zero, one or more expressions, separated from each other with the comma <code>,</code> symbol. Whitespace around elements is ignored in the declaration, thus line breaks, tab stops and blanks can be used for formatting.</p>
<p>In the easiest case, an array is empty and thus looks like:</p>
<pre class="hl">
    <code class="fql">
        
[ ]

    </code>
</pre>
<p>Array elements can be any legal expression values. Nesting of arrays is supported.</p>
<pre class="hl">
    <code class="fql">
        
[ true ]
[ 1, 2, 3 ]
[ -99, "yikes!", [ false, ["no"], [] ], 1 ]
[ [ "fox", "marshal" ] ]

    </code>
</pre>
<p>Individual array values can later be accessed by their positions using the [] accessor. The position of the accessed element must be a numeric value. Positions start at 0.</p>
<pre class="hl">
    <code class="fql">
        
// access 1st array element (elements start at index 0)
u.friends[0]

// access 3rd array element
u.friends[2]

    </code>
</pre>
<h3 id="objects">Objects</h3>
<p>The other supported compound type is the object type. Objects are a composition of zero to many attributes. Each attribute is a name/value pair. Object attributes can be accessed individually by their names. This data type is also known as dictionary, map, associative array and other names.</p>
<p>Object declarations start with a left curly bracket <code>{</code> and end with a right curly bracket <code>}</code>. An object contains zero to many attribute declarations, separated from each other with the <code>,</code> symbol. Whitespace around elements is ignored in the declaration, thus line breaks, tab stops and blanks can be used for formatting.</p>
<p>In the simplest case, an object is empty. Its declaration would then be:</p>
<pre class="hl">
    <code class="fql">
        
{ }

    </code>
</pre>
<p>Each attribute in an object is a name/value pair. Name and value of an attribute are separated using the colon <code>:</code> symbol. The name is always a string, whereas the value can be of any type including sub-objects.</p>
<p>The attribute name is mandatory - there can&rsquo;t be anonymous values in an object. It can be specified as a quoted or unquoted string:</p>
<pre class="hl">
    <code class="fql">
        
{ name: … }    // unquoted
{ 'name': … }  // quoted (apostrophe / "single quote mark")
{ "name": … }  // quoted (quotation mark / "double quote mark")

    </code>
</pre>
<p>It must be quoted if it contains whitespace, escape sequences or characters other than ASCII letters (a-z, A-Z), digits (0-9), underscores (_) and dollar signs ($). The first character has to be a letter, underscore or dollar sign.</p>
<p>If a keyword is used as an attribute name then the attribute name must be quoted or escaped by backticks:</p>
<pre class="hl">
    <code class="fql">
        
{ return: … }    // error, return is a keyword!
{ 'return': … }  // quoted
{ "return": … }  // quoted
{ `return`: … }  // escaped (backticks)
{ ´return´: … }  // escaped (ticks)

    </code>
</pre>
<p>Attribute names can be computed using dynamic expressions, too. To disambiguate regular attribute names from attribute name expressions, computed attribute names must be enclosed in square brackets <code>[ … ]</code>:</p>
<pre class="hl">
    <code class="fql">
        
{ [ CONCAT("test/", "bar") ] : "someValue" }

    </code>
</pre>
<p>There is also shorthand notation for attributes which is handy for returning existing variables easily:</p>
<pre class="hl">
    <code class="fql">
        
LET name = "Peter"
LET age = 42
RETURN { name, age }

    </code>
</pre>
<p>The above is the shorthand equivalent for the generic form:</p>
<pre class="hl">
    <code class="fql">
        
LET name = "Peter"
LET age = 42
RETURN { name: name, age: age }

    </code>
</pre>
<p>Any valid expression can be used as an attribute value. That also means nested objects can be used as attribute values:</p>
<pre class="hl">
    <code class="fql">
        
{ name : "Peter" }
{ "name" : "Vanessa", "age" : 15 }
{ "name" : "John", likes : [ "Swimming", "Skiing" ], "address" : { "street" : "Cucumber lane", "zip" : "94242" } }

    </code>
</pre>
<p>Individual object attributes can later be accessed by their names using the dot <code>.</code> accessor:</p>
<pre class="hl">
    <code class="fql">
        
u.address.city.name
u.friends[0].name.first

    </code>
</pre>
<p>Attributes can also be accessed using the square bracket <code>[]</code> accessor:</p>
<pre class="hl">
    <code class="fql">
        
u["address"]["city"]["name"]
u["friends"][0]["name"]["first"]

    </code>
</pre>
<p>In contrast to the dot accessor, the square brackets allow for expressions:</p>
<pre class="hl">
    <code class="fql">
        
LET attr1 = "friends"
LET attr2 = "name"
u[attr1][0][attr2][ CONCAT("fir", "st") ]

    </code>
</pre>
<h2 id="custom-types">Custom types</h2>
<p>Custom types are the values defined by a user or author of a 3rd party library that extends FQL functionality.
The values can represent either specific primitives or compound types. For example, tt could be http cookies, database records, images and etc.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>In order to define a custom value, it needs to have 2 Go types.
One should implement <code>core.Type</code> and another <code>core.Value</code>.</p>
<pre class="hl">
    <code class="go">
        
type Type interface {
    ID() int64
    String() string
    Equals(other Type) bool
}

    </code>
</pre>
<pre class="hl">
    <code class="go">
        
type Value interface {
    json.Marshaler
    Type() Type
    String() string
    Compare(other Value) int64
    Unwrap() interface{}
    Hash() uint64
    Copy() Value
}

    </code>
</pre>
<p>For simplicity, there is a helper function in <code>core</code> package, that allows to create a type:</p>
<pre class="hl">
    <code class="go">
        
var MyValueType = core.NewType("MyValueType")

    </code>
</pre>
<p><code>core.Value</code> interface provides a basic set of functionality which allows the FQL runtime to use a custom value.</p>
<pre class="hl">
    <code class="fql">
        
LET myType = SOME_FUNC()

RETURN [myType]

    </code>
</pre>
<h3 id="reading-data">Reading data</h3>
<p>By default, implementing <code>core.Value</code> gives the FQL runtime just a basic set of functionality to work with values. This means that a type which implemented only <code>core.Value</code> interfaces is treated as a primitive data type.</p>
<p>If the underlying data type is compound and there is a need for providing access to underlying data, the type should implement <code>core.Getter</code> interface:</p>
<pre class="hl">
    <code class="go">
        
type Getter interface {
    GetIn(ctx context.Context, path []Value) (Value, error)
}

    </code>
</pre>
<p>After that, it will be possible to use <code>.</code> or <code>[]</code> accessors:</p>
<pre class="hl">
    <code class="fql">
        
LET myType = SOME_FUNC()

RETURN myType.someProperty

    </code>
</pre>
<h3 id="iterations">Iterations</h3>
<p>In order to use a custom type as source for <code>FOR IN</code> statement, it must implement <code>core.Iterable</code> interface:</p>
<pre class="hl">
    <code class="go">
        
type Iterable interface {
    Iterate(ctx context.Context) (Iterator, error)
}

    </code>
</pre>
<pre class="hl">
    <code class="go">
        
type Iterator interface {
    Next(ctx context.Context) (value Value, key Value, err error)
}

    </code>
</pre>
<h3 id="clean-up">Clean up</h3>
<p>If a custom type needs to do some clean up after a query execution, it needs to implement Go&rsquo;s <code>io.Closer</code> interface.</p>

</article>
        </section>
    </div>
</div>

        </div><footer class="footer">
    <div class="columns">
        <div class="column is-4 is-hidden-mobile">
            <a href="https://github.com/MontFerret">
                © 2018-2020 MontFerret Team
            </a>
        </div>
        <div class="column is-4 has-text-centered">
            <img src="/img/logo.png" width="30" height="30" />
        </div>
        <div class="column is-4 has-text-right is-hidden-mobile">
            <a href="#">BACK TO TOP Δ</a>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js" integrity="sha256-js+I1fdbke/DJrW2qXQlrw7VUEqmdeFeOW37UC0bEiU=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages/bash.min.js" integrity="sha256-zXrlim8wsIvcEFjsD3THiAfTvtPZifqx8q0rxegiWQc=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/languages/go.min.js" integrity="sha256-LVuWfOU0rWFMCJNl1xb3K2HSWfxtK4IPbqEerP1P83M=" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/@montferret/highlight-fql@1.2.0/index.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            
            hljs.registerLanguage('fql', registerFQL);
            hljs.initHighlighting();
        });
    </script>
</footer>
</body>
</html>
